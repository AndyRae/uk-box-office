{% extends 'base.html' %}

{% block title %}Films{% endblock %}

{% block header %}
<nav aria-label="breadcrumb" class="mt-5">
	<ol class="breadcrumb">
	  <li class="breadcrumb-item"><a href="/">Home</a></li>
	  <li class="breadcrumb-item active">Films</li>
	</ol>
</nav>

<h1 class="mt-4">Films</h1>

{% endblock %}

{% block content %}
	<div class="container mt-4">

		{% if g.search_form %}
			<form class="d-flex" method="get" action="{{ url_for('index.search') }}">
				<div class="form-group">
					{{ g.search_form.q(size=20, class='form-control',
						placeholder="Search films") }}
				</div>
			</form>
		{% endif %}
		<table class="table table-striped table-hover mt-4">
			<thead>
				<tr>
					<th>Title</th>
					<th>Distributor</th>
					<th>Last Updated</th>
					<th>Total Box Office</th>
				</tr>
				</thead>
				<tbody>
				{% for i in data %}
					<tr class="">
						<td><a class="action" href="{{ url_for('index.film', slug=i['slug']) }}">{{ i['name']|title }}</a></td>
						<td><a class="action" href="{{ url_for('index.distributor', slug=i['distributor']['slug']) }}">{{ i['distributor']|title }}</a></td>
						<td>{{ i['weeks'][-1]['date']|date_convert }}</td>
						<td>{{ "Â£ {:,}".format(i['weeks'][-1]['total_gross']) }}</td>
					</tr>
				{% endfor %}
				</tbody>
		</table>

		{% if prev_url %}
		<a class="" href="{{ prev_url }}">Previous</a>
		{% endif %}
		{% if next_url %}
		<a class="" href="{{ next_url }}">Next</a>
		{% endif %}
	</div>
{% endblock %}
