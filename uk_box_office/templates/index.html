{% extends 'base.html' %}

{% block title %}
Home
{% endblock %}

{% block content %}
	<div id="dash" class="container-fluid dash">
		<div class="row control-row align-items-start mb-3">
			<div class="col-4">
				<div class="input-group input-group-sm">
					<input id="start" class="date-picker btn form-control form-control-sm control-element"></input>
					<input id="end" class="date-picker btn form-control form-control-sm control-element"></input>

					<!-- <input type="date" id="startd" class="date-picker btn form-control form-control-sm control-element">
					<input type="date" id="endd" class="date-picker btn form-control form-control-sm control-element">					 -->
					<button class="btn btn-primary btn-filter input-group-btn btn-sm" v-on:click="filter_date">Filter</button>
					<button type="button" class="btn btn-success btn-filter input-group-btn btn-sm" v-on:click="filter_days(7)">7 days</button>
					<button type="button" class="btn btn-warning btn-filter input-group-btn btn-sm" v-on:click="filter_days(30)">30 days</button>
					<button type="button" class="btn btn-danger btn-filter input-group-btn btn-sm" v-on:click="filter_days(90)">3 months</button>
				</div>
			</div>

			<div class="col-2 control-element control-text">
				<small>Total Box Office: £ ${ boxOffice | Currency }</small>
			</div>

			<div class="col-2 control-element control-text">
				<small>Last updated: ${ lastUpdated }</small>
			</div>
		</div>
		<div class="row align-items-start">
			<div class="col">
				<line-chart class="" v-if="loaded" :chartdata="chartdata" :options="options"></line-chart>
				<hr>
				<area-chart class="" v-if="loaded" :chartdataarea="chartdataarea" :optionsarea="optionsarea"></area-chart>
			</div>	
			<div class="vr"></div>
			<div class="col">
				<table class="table table-sm box-table table-hover">
					<thead>
						<tr>
							<th></th>
							<th>Title</th>
							<th>Distributor</th>
							<th>Weeks</th>
							<th>Total Gross</th>
						</tr>
					  </thead>
					  <tbody id="results">
							<tr class="" v-for="(item, index) in sortedfilms.slice(0, 50)">
								<td class="text-small">${ index + 1 }</td>
								<td class="text-small"><a :href="`/films/${ item.film_slug }`">${ item.film | TitleCase }</a></td>
								<td class="text-small">${ item.distributor_id | TitleCase }</td>
								<td class="text-small">100</td>
								<td class="text-small" style="min-width:100px">£ ${ item.week_gross | Currency }</td>
							</tr>
					  </tbody>
				</table>
			</div>
		</div>
	</div>

	<link rel="stylesheet" href="https://unpkg.com/js-datepicker/dist/datepicker.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js" integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

	<script src="https://unpkg.com/js-datepicker"></script>
	<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
	<script src="https://unpkg.com/vue-chartjs/dist/vue-chartjs.min.js"></script>
	<script src="{{ url_for('static', filename='dashboard.js') }}"></script>

{% endblock %}