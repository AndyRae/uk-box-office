{% extends 'base.html' %}

{% block title %}
Home
{% endblock %}

{% block content %}
	<div id="dash" class="container-fluid dash">
		<div class="row align-items-start">
			<div class="col">
				<div class="input-group">
					<input id="start" class="date-picker grid-section filler form-input input-sm dropdown-toggle"></input>
					<input id="end" class="form-input grid-section filler date-picker input-sm"></input>
					<button class="btn btn-primary input-group-btn btn-sm bg-dark" v-on:click="filter_date">Filter</button>
				</div> 
			</div>
		</div>
		<div class="row align-items-start text-center">
			<div class="col">
				Total Box Office: £ ${ boxOffice | Currency }
				
			</div>
			<div class="col">
				Weekend Box Office: £ 120m

			</div>
			<div class="col">
				Number of cinemas: 701

			</div>
			<div class="col">
				Last updated: ${ lastUpdated }
			</div>
			<div class="col">
				
			</div>

		</div>
		<div class="row align-items-start">
			<div class="col">
				<line-chart class="" v-if="loaded" :chartdata="chartdata" :options="options"></line-chart>
				<hr>
				<area-chart class="" v-if="loaded" :chartdataarea="chartdataarea" :optionsarea="optionsarea"></area-chart>
			</div>	
			<div class="vr"></div>
			<div class="col">
				<table class="table box-table table-hover">
					<thead>
						<tr>
							<th></th>
							<th>Title</th>
							<th>Distributor</th>
							<th>Weeks</th>
							<th>Total Gross</th>
						</tr>
					  </thead>
					  <tbody id="results">
							<tr class="" v-for="(item, index) in sortedfilms.slice(0, 50)">
								<td class="text-small">${ index + 1 }</td>
								<td class="text-small"><a :href="`/films/${ item.film_slug }`">${ item.film | TitleCase }</a></td>
								<td class="text-small">${ item.distributor_id | TitleCase }</td>
								<td class="text-small">100</td>
								<td class="text-small" style="min-width:100px">£ ${ item.week_gross | Currency }</td>
							</tr>
					  </tbody>
				</table>
			</div>
		</div>
	</div>

	<link rel="stylesheet" href="https://unpkg.com/js-datepicker/dist/datepicker.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js" integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

	<script src="https://unpkg.com/js-datepicker"></script>
	<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
	<script src="https://unpkg.com/vue-chartjs/dist/vue-chartjs.min.js"></script>
	<script src="{{ url_for('static', filename='dashboard.js') }}"></script>

{% endblock %}